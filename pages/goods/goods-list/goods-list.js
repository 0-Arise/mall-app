(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods/goods-list/goods-list"],{2833:function(t,e,o){"use strict";var s,r=function(){var t=this,e=t.$createElement;t._self._c},i=[];o.d(e,"b",function(){return r}),o.d(e,"c",function(){return i}),o.d(e,"a",function(){return s})},8371:function(t,e,o){"use strict";o.r(e);var s=o("a4a9"),r=o.n(s);for(var i in s)"default"!==i&&function(t){o.d(e,t,function(){return s[t]})}(i);e["default"]=r.a},8617:function(t,e,o){},a4a9:function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=o("7416"),r=(o("9e95"),{data:function(){return{page:{total:0,current:1,size:4,pages:10,descs:"sales_num",ascs:"",orders:[]},categoryId:0,goodsList:[],loadingText:"正在加载...",headerTop:"0px",headerPosition:"fixed",orderbyList:[{text:"销量",selected:!0,orderbyicon:!1,orderby:"sales_num"},{text:"价格",selected:!1,orderbyicon:["sheng","jiang"],orderby:"price"},{text:"好评",selected:!1,orderbyicon:!1,orderby:"sort"}],orderby:"sheng"}},onLoad:function(e){this.categoryId=e.cid,t.setNavigationBarTitle({title:e.name}),this.goodsList=[],this.loadGoodsList(this.categoryId)},onPageScroll:function(t){t.scrollTop>=0?this.headerPosition="fixed":this.headerPosition="absolute"},onPullDownRefresh:function(){var e=this;setTimeout(function(){e.reload(),t.stopPullDownRefresh()},1e3)},onReachBottom:function(){t.showToast({title:"获取更多商品"});var e=this.goodsList.length;if(this.page.current>=this.page.pages||e>=40)return this.loadingText="我是有底线的哦",!1;this.loadingText="正在加载...",this.page.current+=1,this.loadGoodsList(this.categoryId)},methods:{loadGoodsList:function(t){var e=this,o={categoryId:t,current:this.page.current,size:this.page.size};Object.assign(o,this.page),(0,s.getGoodsList)(o).then(function(t){if(console.log(t),0==t.data.code&&null!=t.data.data&&(e.page.currentPage=t.data.data.current,e.page.pages=t.data.data.pages,t.data.data.records.length>0)){var o=t.data.data.records,s=!0,r=!1,i=void 0;try{for(var a,n=o[Symbol.iterator]();!(s=(a=n.next()).done);s=!0){var d=a.value;d["imgs"]=d.coverImgs,e.goodsList.push(d)}}catch(c){r=!0,i=c}finally{try{s||null==n.return||n.return()}finally{if(r)throw i}}}}),this.loadingText=""},reload:function(){this.goodsList=[],this.page.current=1,this.loadGoodsList()},toGoods:function(e){t.navigateTo({url:"../goods?gid="+e.goodsId})},select:function(e){var o=this.orderbyList[e].text+"排序 ";if(this.orderbyList[e].orderbyicon){var s="sheng"==this.orderbyList[e].orderbyicon?"升序":"降序";this.orderbyList[e].selected&&(s="jiang"==this.orderbyList[e].orderbyicon?"降序":"升序",this.orderbyList[e].orderby=0==this.orderbyList[e].orderby?1:0),o+=s}this.orderbyList[e].selected=!0;for(var r=this.orderbyList.length,i=0;i<r;i++)i!=e&&(this.orderbyList[i].selected=!1);t.showToast({title:o,icon:"none"}),console.log(this.orderbyList[e]),this.page.descs=this.orderbyList[e].orderby,0==this.orderbyList[e].orderby?(this.page.descs=null,this.page.ascs="price"):1==this.orderbyList[e].orderby&&(this.page.descs="price",this.page.ascs=null),this.goodsList=[],this.page.current=1,this.loadGoodsList()}}});e.default=r}).call(this,o("543d")["default"])},b8c7:function(t,e,o){"use strict";var s=o("8617"),r=o.n(s);r.a},c067:function(t,e,o){"use strict";(function(t){o("3075");s(o("66fd"));var e=s(o("fb08"));function s(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])},fb08:function(t,e,o){"use strict";o.r(e);var s=o("2833"),r=o("8371");for(var i in r)"default"!==i&&function(t){o.d(e,t,function(){return r[t]})}(i);o("b8c7");var a,n=o("f0c5"),d=Object(n["a"])(r["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],a);e["default"]=d.exports}},[["c067","common/runtime","common/vendor"]]]);